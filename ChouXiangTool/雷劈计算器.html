<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>雷劈计算器 - 科学的概率分析工具</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "sphx0kqwdu");
    </script>
    <!-- 配置Tailwind自定义主题 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        neutral: '#1F2937',
                        light: '#F9FAFB'
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .transition-custom {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
            .card-hover {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .card-hover:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            }
        }
    </style>
</head>
<body class="font-inter bg-gray-50 min-h-screen">
    <!-- 顶部导航栏 -->
    <header class="bg-white shadow-md fixed w-full top-0 z-50 transition-custom">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fa fa-bolt text-primary text-2xl"></i>
                <h1 class="text-xl md:text-2xl font-bold text-neutral">雷劈计算器</h1>
            </div>
            <div class="flex items-center space-x-4">
                <a href="../index.html" class="p-2 rounded-full hover:bg-gray-100 transition-custom" title="返回首页">
                    <i class="fa fa-home text-neutral"></i>
                </a>
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-100 transition-custom" title="切换主题">
                    <i class="fa fa-moon-o text-neutral"></i>
                </button>
                <button id="about-btn" class="p-2 rounded-full hover:bg-gray-100 transition-custom" title="关于工具">
                    <i class="fa fa-info-circle text-neutral"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- 主要内容区 -->
    <main class="container mx-auto px-4 pt-24 pb-16">
        <!-- 介绍卡片 -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8 transform hover:shadow-xl transition-custom">
            <h2 class="text-xl font-semibold text-neutral mb-2">科学的雷击概率分析工具</h2>
            <p class="text-gray-600">
                基于您的历史记录，科学分析您被雷劈的概率。本工具仅供娱乐，结果不具有科学参考价值。
            </p>
        </div>
        
        <!-- 计算器主体 -->
        <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden">
            <div class="p-6 border-b border-gray-100">
                <h3 class="font-medium text-neutral flex items-center text-lg">
                    <i class="fa fa-calculator mr-2 text-primary"></i>雷击概率计算
                </h3>
            </div>
            
            <div class="p-6">
                <div class="mb-6">
                    <label for="relation" class="block text-gray-700 mb-2 font-medium">是否被雷劈过：</label>
                    <select id="relation" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom">
                        <option value="是">是</option>
                        <option value="否" selected>否</option>
                        <option value="记不清">记不清</option>
                    </select>
                </div>
                
                <div class="mb-6">
                    <label for="outdoor" class="block text-gray-700 mb-2 font-medium">雷雨天气是否常户外活动：</label>
                    <select id="outdoor" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-custom">
                        <option value="经常">经常</option>
                        <option value="偶尔" selected>偶尔</option>
                        <option value="从不">从不</option>
                    </select>
                </div>
                
                <div class="mb-8">
                    <button 
                        id="calculate-btn"
                        class="w-full px-6 py-3 bg-primary hover:bg-primary/90 text-white rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-custom font-medium flex items-center justify-center"
                    >
                        <i class="fa fa-bolt mr-2"></i>开始计算概率
                    </button>
                </div>
                
                <div class="mb-6">
                    <div class="text-gray-700 mb-2 font-medium">计算进度：</div>
                    <div id="progress-container" class="w-full bg-gray-200 rounded-lg h-8 overflow-hidden">
                        <div id="progress-bar" class="h-full bg-secondary text-white text-center leading-8 transition-all duration-300" style="width: 0%">
                            0%
                        </div>
                    </div>
                </div>
                
                <div class="mt-8 p-5 bg-gray-50 rounded-lg border border-gray-200">
                    <h4 class="font-medium text-neutral mb-3 flex items-center">
                        <i class="fa fa-lightbulb-o mr-2 text-primary"></i>计算结果
                    </h4>
                    <div id="result" class="text-gray-600 min-h-[60px] flex items-center justify-center text-lg">
                        请点击计算按钮开始分析
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 分析卡片 -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
            <div class="bg-white p-5 rounded-xl shadow-md card-hover">
                <div class="text-primary text-3xl mb-3">
                    <i class="fa fa-cloud-bolt"></i>
                </div>
                <h3 class="font-semibold text-neutral mb-2">雷击知识</h3>
                <p class="text-gray-600 text-sm">
                    每年全球约有24万人被雷击，概率约为百万分之三。
                </p>
            </div>
            <div class="bg-white p-5 rounded-xl shadow-md card-hover">
                <div class="text-primary text-3xl mb-3">
                    <i class="fa fa-shield"></i>
                </div>
                <h3 class="font-semibold text-neutral mb-2">防护建议</h3>
                <p class="text-gray-600 text-sm">
                    雷雨天气应避免户外活动，远离高大树木和电线杆。
                </p>
            </div>
            <div class="bg-white p-5 rounded-xl shadow-md card-hover">
                <div class="text-primary text-3xl mb-3">
                    <i class="fa fa-info-circle"></i>
                </div>
                <h3 class="font-semibold text-neutral mb-2">免责声明</h3>
                <p class="text-gray-600 text-sm">
                    本工具仅供娱乐，请勿作为实际行动的参考依据。
                </p>
            </div>
        </div>
    </main>
    
    <!-- 页脚 -->
    <footer class="bg-white border-t border-gray-200 py-6">
        <div class="container mx-auto px-4 text-center text-gray-500 text-sm">
            <p>雷劈计算器 &copy; 2025 - 仅供娱乐的概率分析工具</p>
            <p class="mt-1">所有计算均在您的浏览器中完成，无需担心数据安全</p>
            <p class="mt-1">Ver.1.0.20250804</p>
        </div>
    </footer>
    
    <!-- 关于模态框 -->
    <div id="about-modal" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center hidden opacity-0 transition-custom">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 transform scale-95 transition-custom">
            <div class="p-6 border-b border-gray-100">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold text-neutral">关于雷劈计算器</h3>
                    <button id="close-about" class="text-gray-500 hover:text-gray-700">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <p class="text-gray-600 mb-4">
                    雷劈计算器是一个趣味工具，基于简单的逻辑计算被雷劈的概率，仅供娱乐。
                </p>
                <h4 class="font-semibold text-neutral mb-2">工具特点：</h4>
                <ul class="list-disc list-inside text-gray-600 mb-4 space-y-1">
                    <li>简洁直观的操作界面</li>
                    <li>带有动画效果的计算过程</li>
                    <li>有趣的结果反馈</li>
                    <li>支持深色/浅色模式切换</li>
                </ul>
                <p class="text-gray-500 text-sm">
                    注意：本工具结果仅供娱乐，不具有任何科学依据和参考价值。
                </p>
            </div>
            <div class="p-4 bg-gray-50 rounded-b-xl text-center">
                <button id="got-it" class="px-4 py-2 bg-primary text-white rounded hover:bg-primary/90 transition-custom">
                    明白了
                </button>
            </div>
        </div>
    </div>
    
    <!-- 通知提示 -->
    <div id="toast" class="fixed bottom-6 right-6 bg-neutral text-white px-6 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-custom flex items-center">
        <i id="toast-icon" class="fa fa-check-circle mr-2"></i>
        <span id="toast-message">操作成功</span>
    </div>

    <script>
        // DOM元素引用
        const progressBar = document.getElementById('progress-bar');
        const resultEl = document.getElementById('result');
        const calculateBtn = document.getElementById('calculate-btn');
        const relationSelect = document.getElementById('relation');
        const outdoorSelect = document.getElementById('outdoor');
        const aboutBtn = document.getElementById('about-btn');
        const aboutModal = document.getElementById('about-modal');
        const closeAboutBtn = document.getElementById('close-about');
        const gotItBtn = document.getElementById('got-it');
        const themeToggleBtn = document.getElementById('theme-toggle');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        const toastIcon = document.getElementById('toast-icon');
        
        // 初始化事件监听器
        function initEventListeners() {
            // 计算按钮点击事件
            calculateBtn.addEventListener('click', calculate);
            
            // 关于模态框相关事件
            aboutBtn.addEventListener('click', showAboutModal);
            closeAboutBtn.addEventListener('click', hideAboutModal);
            gotItBtn.addEventListener('click', hideAboutModal);
            
            // 主题切换事件
            themeToggleBtn.addEventListener('click', toggleTheme);
        }
        
        // 显示通知提示
        function showToast(message, isError = false) {
            toastMessage.textContent = message;
            toastIcon.className = isError ? 'fa fa-exclamation-circle mr-2' : 'fa fa-check-circle mr-2';
            toast.classList.remove('translate-y-20', 'opacity-0');
            toast.classList.add('translate-y-0', 'opacity-100');
            
            setTimeout(() => {
                toast.classList.remove('translate-y-0', 'opacity-100');
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }
        
        // 重置进度条
        function resetProgressBar() {
            progressBar.style.width = '0%';
            progressBar.textContent = '0%';
            resultEl.textContent = '正在准备计算...';
        }
        
        // 计算功能
        function calculate() {
            // 防止重复点击
            calculateBtn.disabled = true;
            calculateBtn.classList.add('opacity-70', 'cursor-not-allowed');
            calculateBtn.innerHTML = '<i class="fa fa-spinner fa-spin mr-2"></i>计算中...';
            
            // 首先重置进度条
            resetProgressBar();
            
            // 短暂延迟后开始模拟计算，让重置效果更明显
            setTimeout(() => {
                let width = 0;
                const interval = setInterval(() => {
                    if (width >= 100) {
                        clearInterval(interval);
                        
                        // 获取选择的值并计算结果
                        const hasBeenHit = relationSelect.value;
                        const outdoorActivity = outdoorSelect.value;
                        let result = "";
                        
                        // 结合两个条件计算结果
                        if (hasBeenHit === "是") {
                            if (outdoorActivity === "经常") {
                                result = "概率极高！<br><br>您已有被雷击记录且常在雷雨天气外出，建议购买避雷针随身佩戴";
                            } else if (outdoorActivity === "偶尔") {
                                result = "概率较高<br><br>您已有被雷击记录，虽然不常外出，但仍需提高警惕";
                            } else {
                                result = "概率中等<br><br>虽然您已有被雷击记录，但您很少在雷雨天气外出，风险有所降低";
                            }
                        } else if (hasBeenHit === "否") {
                            if (outdoorActivity === "经常") {
                                result = "风险上升中<br><br>虽然您从未被雷击，但常在雷雨天气外出，建议减少此类行为";
                            } else if (outdoorActivity === "偶尔") {
                                result = "概率较低<br><br>您从未被雷击且不常在雷雨天气外出，继续保持良好习惯";
                            } else {
                                result = "概率极低<br><br>您从未被雷击且从不在雷雨天气外出，安全系数极高";
                            }
                        } else { // 记不清
                            result = "记忆模糊，无法精确计算<br><br>建议安装监控设备记录日常活动，以便下次分析";
                        }            
                        
                        // 显示结果并添加动画
                        resultEl.innerHTML = result;
                        resultEl.classList.add('animate-pulse');
                        setTimeout(() => {
                            resultEl.classList.remove('animate-pulse');
                        }, 1000);
                        
                        // 恢复按钮状态
                        calculateBtn.disabled = false;
                        calculateBtn.classList.remove('opacity-70', 'cursor-not-allowed');
                        calculateBtn.innerHTML = '<i class="fa fa-bolt mr-2"></i>开始计算概率';
                        
                        showToast('计算完成');
                    } else {
                        width++;
                        progressBar.style.width = width + '%';
                        progressBar.textContent = width + '%';
                    }
                }, 20); // 每20毫秒更新一次进度
            }, 300); // 300毫秒延迟，让重置效果可见
        }
        
        // 切换主题
        function toggleTheme() {
            const isDark = document.body.classList.toggle('dark');
            const icon = themeToggleBtn.querySelector('i');
            
            if (isDark) {
                document.body.classList.add('bg-gray-900', 'text-white');
                document.body.classList.remove('bg-gray-50');
                icon.classList.remove('fa-moon-o');
                icon.classList.add('fa-sun-o');
                showToast('已切换至深色模式');
            } else {
                document.body.classList.remove('bg-gray-900', 'text-white');
                document.body.classList.add('bg-gray-50');
                icon.classList.remove('fa-sun-o');
                icon.classList.add('fa-moon-o');
                showToast('已切换至浅色模式');
            }
        }
        
        // 显示关于模态框
        function showAboutModal() {
            aboutModal.classList.remove('hidden', 'opacity-0');
            aboutModal.querySelector('div').classList.remove('scale-95');
            aboutModal.querySelector('div').classList.add('scale-100');
            aboutModal.classList.add('opacity-100');
        }
        
        // 隐藏关于模态框
        function hideAboutModal() {
            aboutModal.classList.remove('opacity-100');
            aboutModal.querySelector('div').classList.remove('scale-100');
            aboutModal.querySelector('div').classList.add('scale-95');
            aboutModal.classList.add('opacity-0');
            setTimeout(() => {
                aboutModal.classList.add('hidden');
            }, 300);
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', initEventListeners);
    </script>
</body>
</html>
    