<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>字数统计工具 - 详细的文本统计分析</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- 配置Tailwind自定义主题 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        neutral: '#1F2937',
                        light: '#F9FAFB'
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "sphx0kqwdu");
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .transition-custom {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
            .stat-card-hover {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .stat-card-hover:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            }
        }
    </style>
</head>
<body class="font-inter bg-gray-50 min-h-screen">
    <!-- 顶部导航栏 -->
    <header class="bg-white shadow-md fixed w-full top-0 z-50 transition-custom">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fa fa-calculator text-primary text-2xl"></i>
                <h1 class="text-xl md:text-2xl font-bold text-neutral">字数统计工具</h1>
            </div>
            <div class="flex items-center space-x-4">
                <a href="../index.html" class="p-2 rounded-full hover:bg-gray-100 transition-custom" title="返回首页">
                    <i class="fa fa-home text-neutral"></i>
                </a>
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-100 transition-custom" title="切换主题">
                    <i class="fa fa-moon-o text-neutral"></i>
                </button>
                <button id="about-btn" class="p-2 rounded-full hover:bg-gray-100 transition-custom" title="关于工具">
                    <i class="fa fa-info-circle text-neutral"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- 主要内容区 -->
    <main class="container mx-auto px-4 pt-24 pb-16">
        <!-- 介绍卡片 -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8 transform hover:shadow-xl transition-custom">
            <h2 class="text-xl font-semibold text-neutral mb-2">详细的文本统计分析工具</h2>
            <p class="text-gray-600">
                输入或粘贴文本内容，工具将自动统计字符数、字数、行数、段落数等信息，
                支持实时统计和多种统计选项，帮助您快速了解文本情况。
            </p>
        </div>
        
        <!-- 文本输入和统计结果区域 -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- 输入区域 -->
            <div class="flex flex-col h-full">
                <div class="bg-white rounded-t-xl shadow-md p-4 flex justify-between items-center border-b border-gray-100">
                    <h3 class="font-medium text-neutral flex items-center">
                        <i class="fa fa-file-text-o mr-2 text-primary"></i>输入文本
                    </h3>
                    <div class="flex space-x-2">
                        <button id="clear-input" class="p-2 text-gray-500 hover:text-red-500 rounded hover:bg-gray-100 transition-custom" title="清空">
                            <i class="fa fa-trash-o"></i>
                        </button>
                        <button id="sample-text" class="p-2 text-gray-500 hover:text-primary rounded hover:bg-gray-100 transition-custom" title="示例文本">
                            <i class="fa fa-file-text"></i>
                        </button>
                    </div>
                </div>
                <textarea 
                    id="input-text" 
                    class="flex-grow w-full p-4 bg-gray-50 border border-gray-200 rounded-b-xl focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none resize-none transition-custom"
                    placeholder="请在此输入或粘贴需要统计的文本内容..."
                    rows="15"
                ></textarea>
            </div>
            
            <!-- 统计结果区域 -->
            <div class="flex flex-col h-full">
                <div class="bg-white rounded-t-xl shadow-md p-4 flex justify-between items-center border-b border-gray-100">
                    <h3 class="font-medium text-neutral flex items-center">
                        <i class="fa fa-bar-chart mr-2 text-secondary"></i>统计结果
                    </h3>
                    <div class="flex space-x-2">
                        <button id="copy-result" class="p-2 text-gray-500 hover:text-secondary rounded hover:bg-gray-100 transition-custom" title="复制结果">
                            <i class="fa fa-copy"></i>
                        </button>
                        <button id="download-result" class="p-2 text-gray-500 hover:text-secondary rounded hover:bg-gray-100 transition-custom" title="下载结果">
                            <i class="fa fa-download"></i>
                        </button>
                    </div>
                </div>
                <div class="flex-grow w-full p-6 bg-gray-50 border border-gray-200 rounded-b-xl">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <!-- 统计卡片 -->
                        <div class="bg-white p-4 rounded-lg shadow-sm stat-card-hover">
                            <div class="text-gray-500 text-sm mb-1">总字符数（含空格）</div>
                            <div class="text-2xl font-bold text-primary" id="total-chars">0</div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-sm stat-card-hover">
                            <div class="text-gray-500 text-sm mb-1">总字符数（不含空格）</div>
                            <div class="text-2xl font-bold text-primary" id="chars-no-space">0</div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-sm stat-card-hover">
                            <div class="text-gray-500 text-sm mb-1">中文字符</div>
                            <div class="text-2xl font-bold text-primary" id="chinese-chars">0</div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-sm stat-card-hover">
                            <div class="text-gray-500 text-sm mb-1">英文字符</div>
                            <div class="text-2xl font-bold text-primary" id="english-chars">0</div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-sm stat-card-hover">
                            <div class="text-gray-500 text-sm mb-1">字数</div>
                            <div class="text-2xl font-bold text-primary" id="word-count">0</div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-sm stat-card-hover">
                            <div class="text-gray-500 text-sm mb-1">行数</div>
                            <div class="text-2xl font-bold text-primary" id="line-count">0</div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-sm stat-card-hover">
                            <div class="text-gray-500 text-sm mb-1">段落数</div>
                            <div class="text-2xl font-bold text-primary" id="paragraph-count">0</div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-sm stat-card-hover">
                            <div class="text-gray-500 text-sm mb-1">空格数</div>
                            <div class="text-2xl font-bold text-primary" id="space-count">0</div>
                        </div>
                    </div>
                    
                    <div class="mt-6 p-4 bg-white rounded-lg shadow-sm">
                        <h4 class="font-medium text-neutral mb-3">统计详情</h4>
                        <pre id="detailed-stats" class="text-sm text-gray-600 whitespace-pre-wrap overflow-auto max-h-40"></pre>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 操作按钮 -->
        <div class="mt-8 flex flex-col sm:flex-row justify-center gap-4">
            <button 
                id="count-btn" 
                class="px-8 py-3 bg-primary hover:bg-primary/90 text-white rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-custom font-medium flex items-center justify-center"
            >
                <i class="fa fa-calculator mr-2"></i>执行统计
            </button>
            <button 
                id="auto-count-btn" 
                class="px-6 py-3 bg-gray-200 hover:bg-gray-300 text-neutral rounded-lg shadow-sm hover:shadow transition-custom font-medium flex items-center justify-center"
            >
                <i class="fa fa-refresh mr-2"></i>实时统计
            </button>
        </div>
        
        <!-- 选项设置 -->
        <div class="mt-8 bg-white rounded-xl shadow-md p-6">
            <h3 class="font-semibold text-neutral mb-4 flex items-center">
                <i class="fa fa-cog mr-2 text-primary"></i>统计选项
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="flex items-center">
                    <input type="checkbox" id="count-punctuation" class="w-4 h-4 text-primary rounded border-gray-300 focus:ring-primary" checked>
                    <label for="count-punctuation" class="ml-2 text-gray-700">包含标点符号</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="count-numbers" class="w-4 h-4 text-primary rounded border-gray-300 focus:ring-primary" checked>
                    <label for="count-numbers" class="ml-2 text-gray-700">包含数字</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="ignore-whitespace" class="w-4 h-4 text-primary rounded border-gray-300 focus:ring-primary">
                    <label for="ignore-whitespace" class="ml-2 text-gray-700">忽略所有空白字符</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="detailed-view" class="w-4 h-4 text-primary rounded border-gray-300 focus:ring-primary" checked>
                    <label for="detailed-view" class="ml-2 text-gray-700">显示详细统计信息</label>
                </div>
            </div>
        </div>
    </main>
    
    <!-- 页脚 -->
    <footer class="bg-white border-t border-gray-200 py-6">
        <div class="container mx-auto px-4 text-center text-gray-500 text-sm">
            <p>字数统计工具 &copy; 2025 - 详细、高效的文本统计解决方案</p>
            <p class="mt-1">所有处理均在您的浏览器中完成，不会上传您的文本内容</p>
            <p class="mt-1">Ver.1.0.20250804</p>
        </div>
    </footer>
    
    <!-- 关于模态框 -->
    <div id="about-modal" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center hidden opacity-0 transition-custom">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 transform scale-95 transition-custom">
            <div class="p-6 border-b border-gray-100">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold text-neutral">关于字数统计工具</h3>
                    <button id="close-about" class="text-gray-500 hover:text-gray-700">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <p class="text-gray-600 mb-4">
                    字数统计工具是一个功能全面的文本分析工具，帮助您快速获取文本的各项统计信息。
                </p>
                <h4 class="font-semibold text-neutral mb-2">主要功能：</h4>
                <ul class="list-disc list-inside text-gray-600 mb-4 space-y-1">
                    <li>统计总字符数（含空格和不含空格）</li>
                    <li>分别统计中文字符和英文字符数量</li>
                    <li>计算字数、行数和段落数</li>
                    <li>统计空格数量和其他详细信息</li>
                    <li>支持实时统计模式</li>
                    <li>可复制或下载统计结果</li>
                </ul>
                <p class="text-gray-500 text-sm">
                    所有处理均在本地浏览器中完成，不会上传您的文本内容，保护您的隐私安全。
                </p>
            </div>
            <div class="p-4 bg-gray-50 rounded-b-xl text-center">
                <button id="got-it" class="px-4 py-2 bg-primary text-white rounded hover:bg-primary/90 transition-custom">
                    明白了
                </button>
            </div>
        </div>
    </div>
    
    <!-- 通知提示 -->
    <div id="toast" class="fixed bottom-6 right-6 bg-neutral text-white px-6 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-custom flex items-center">
        <i id="toast-icon" class="fa fa-check-circle mr-2"></i>
        <span id="toast-message">操作成功</span>
    </div>

    <script>
        // DOM元素引用
        const inputText = document.getElementById('input-text');
        const countBtn = document.getElementById('count-btn');
        const autoCountBtn = document.getElementById('auto-count-btn');
        const clearInputBtn = document.getElementById('clear-input');
        const copyResultBtn = document.getElementById('copy-result');
        const downloadResultBtn = document.getElementById('download-result');
        const sampleTextBtn = document.getElementById('sample-text');
        const countPunctuationCheckbox = document.getElementById('count-punctuation');
        const countNumbersCheckbox = document.getElementById('count-numbers');
        const ignoreWhitespaceCheckbox = document.getElementById('ignore-whitespace');
        const detailedViewCheckbox = document.getElementById('detailed-view');
        const totalCharsEl = document.getElementById('total-chars');
        const charsNoSpaceEl = document.getElementById('chars-no-space');
        const chineseCharsEl = document.getElementById('chinese-chars');
        const englishCharsEl = document.getElementById('english-chars');
        const wordCountEl = document.getElementById('word-count');
        const lineCountEl = document.getElementById('line-count');
        const paragraphCountEl = document.getElementById('paragraph-count');
        const spaceCountEl = document.getElementById('space-count');
        const detailedStatsEl = document.getElementById('detailed-stats');
        const aboutBtn = document.getElementById('about-btn');
        const aboutModal = document.getElementById('about-modal');
        const closeAboutBtn = document.getElementById('close-about');
        const gotItBtn = document.getElementById('got-it');
        const themeToggleBtn = document.getElementById('theme-toggle');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        const toastIcon = document.getElementById('toast-icon');
        
        // 示例文本
        const sampleText = `字数统计工具可以帮助您快速了解文本的各项统计信息。
它能够统计总字符数、中文字符数、英文字符数、字数、行数和段落数等。

这个工具支持实时统计功能，当您开启实时统计后，
每输入一个字符都会自动更新统计结果，非常方便。

统计数据可以帮助您更好地控制文本长度，
无论是写作、编辑还是其他需要控制字数的场景都非常实用。`;
        
        // 状态变量
        let autoCountEnabled = false;
        
        // 显示通知提示
        function showToast(message, isError = false) {
            toastMessage.textContent = message;
            toastIcon.className = isError ? 'fa fa-exclamation-circle mr-2' : 'fa fa-check-circle mr-2';
            toast.classList.remove('translate-y-20', 'opacity-0');
            toast.classList.add('translate-y-0', 'opacity-100');
            
            setTimeout(() => {
                toast.classList.remove('translate-y-0', 'opacity-100');
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }
        
        // 文本统计功能
        function countText() {
            const text = inputText.value;
            if (!text.trim() && text.length === 0) {
                resetStats();
                return;
            }
            
            // 处理选项
            const countPunctuation = countPunctuationCheckbox.checked;
            const countNumbers = countNumbersCheckbox.checked;
            const ignoreWhitespace = ignoreWhitespaceCheckbox.checked;
            const detailedView = detailedViewCheckbox.checked;
            
            // 基础统计
            let totalChars = text.length;
            let spaceCount = (text.match(/\s/g) || []).length;
            let charsNoSpace = ignoreWhitespace ? text.replace(/\s/g, '').length : totalChars - spaceCount;
            
            // 中文字符统计（包括中文标点）
            const chineseChars = (text.match(/[\u4e00-\u9fa5]/g) || []).length;
            const chinesePunctuation = (text.match(/[\u3000-\u303F\uFF00-\uFFEF]/g) || []).length;
            
            // 英文字符统计
            const englishLetters = (text.match(/[a-zA-Z]/g) || []).length;
            const englishPunctuation = countPunctuation ? (text.match(/[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/g) || []).length : 0;
            
            // 数字统计
            const numbers = countNumbers ? (text.match(/[0-9]/g) || []).length : 0;
            
            // 行数统计
            const lines = text.split('\n');
            const lineCount = lines.length;
            
            // 段落数统计（连续空行为段落分隔）
            const paragraphs = text.split(/\n\s*\n/).filter(p => p.trim().length > 0);
            const paragraphCount = paragraphs.length;
            
            // 字数统计（中文按字符，英文按空格分隔）
            let wordCount = 0;
            // 匹配中文、日文、韩文
            wordCount += (text.match(/[\u4e00-\u9fa5\u3040-\u309f\u30a0-\u30ff]/g) || []).length;
            // 匹配英文单词
            wordCount += (text.match(/[a-zA-Z]+/g) || []).length;
            // 匹配数字（如果计入）
            if (countNumbers) {
                wordCount += (text.match(/[0-9]+/g) || []).length;
            }
            
            // 更新统计显示
            totalCharsEl.textContent = totalChars;
            charsNoSpaceEl.textContent = charsNoSpace;
            chineseCharsEl.textContent = chineseChars;
            englishCharsEl.textContent = englishLetters;
            wordCountEl.textContent = wordCount;
            lineCountEl.textContent = lineCount;
            paragraphCountEl.textContent = paragraphCount;
            spaceCountEl.textContent = spaceCount;
            
            // 详细统计信息
            let detailedStats = [];
            detailedStats.push(`总字符数：${totalChars}`);
            detailedStats.push(`总字符数（不含空格）：${charsNoSpace}`);
            detailedStats.push(`中文字符：${chineseChars}`);
            detailedStats.push(`中文标点：${chinesePunctuation}`);
            detailedStats.push(`英文字母：${englishLetters}`);
            detailedStats.push(`英文标点：${englishPunctuation}`);
            detailedStats.push(`数字：${numbers}`);
            detailedStats.push(`字数：${wordCount}`);
            detailedStats.push(`行数：${lineCount}`);
            detailedStats.push(`段落数：${paragraphCount}`);
            detailedStats.push(`空格数：${spaceCount}`);
            
            detailedStatsEl.textContent = detailedStats.join('\n');
            
            // 控制详细信息显示
            detailedStatsEl.parentElement.style.display = detailedView ? 'block' : 'none';
            
            // 添加动画效果
            document.querySelectorAll('.stat-card-hover').forEach(card => {
                card.classList.add('ring-2', 'ring-secondary/30');
                setTimeout(() => {
                    card.classList.remove('ring-2', 'ring-secondary/30');
                }, 500);
            });
            
            if (!autoCountEnabled) {
                showToast('统计完成');
            }
        }
        
        // 重置统计数据
        function resetStats() {
            totalCharsEl.textContent = '0';
            charsNoSpaceEl.textContent = '0';
            chineseCharsEl.textContent = '0';
            englishCharsEl.textContent = '0';
            wordCountEl.textContent = '0';
            lineCountEl.textContent = '0';
            paragraphCountEl.textContent = '0';
            spaceCountEl.textContent = '0';
            detailedStatsEl.textContent = '';
        }
        
        // 复制结果到剪贴板
        function copyToClipboard() {
            const statsText = detailedStatsEl.textContent;
            if (!statsText) {
                showToast('没有可复制的统计结果', true);
                return;
            }
            
            navigator.clipboard.writeText(statsText).then(() => {
                // 复制成功动画
                copyResultBtn.classList.add('text-green-500');
                setTimeout(() => {
                    copyResultBtn.classList.remove('text-green-500');
                }, 500);
                
                showToast('统计结果已复制到剪贴板');
            }).catch(err => {
                showToast('复制失败，请手动复制', true);
                console.error('无法复制内容: ', err);
            });
        }
        
        // 下载结果
        function downloadResult() {
            const statsText = detailedStatsEl.textContent;
            if (!statsText) {
                showToast('没有可下载的统计结果', true);
                return;
            }
            
            const blob = new Blob([statsText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = '字数统计结果.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('统计结果已下载');
        }
        
        // 切换实时统计模式
        function toggleAutoCount() {
            autoCountEnabled = !autoCountEnabled;
            
            if (autoCountEnabled) {
                autoCountBtn.classList.remove('bg-gray-200', 'hover:bg-gray-300');
                autoCountBtn.classList.add('bg-primary', 'hover:bg-primary/90', 'text-white');
                autoCountBtn.querySelector('i').classList.add('fa-spin');
                inputText.addEventListener('input', countText);
                countText(); // 立即统计一次
                showToast('已开启实时统计');
            } else {
                autoCountBtn.classList.remove('bg-primary', 'hover:bg-primary/90', 'text-white');
                autoCountBtn.classList.add('bg-gray-200', 'hover:bg-gray-300', 'text-neutral');
                autoCountBtn.querySelector('i').classList.remove('fa-spin');
                inputText.removeEventListener('input', countText);
                showToast('已关闭实时统计');
            }
        }
        
        // 显示示例文本
        function loadSampleText() {
            inputText.value = sampleText;
            inputText.focus();
            
            // 动画效果
            inputText.classList.add('ring-2', 'ring-primary/30');
            setTimeout(() => {
                inputText.classList.remove('ring-2', 'ring-primary/30');
            }, 500);
            
            if (autoCountEnabled) {
                countText();
            }
            
            showToast('已加载示例文本');
        }
        
        // 切换主题
        function toggleTheme() {
            const isDark = document.body.classList.toggle('dark');
            const icon = themeToggleBtn.querySelector('i');
            
            if (isDark) {
                icon.classList.remove('fa-moon-o');
                icon.classList.add('fa-sun-o');
                document.body.classList.add('bg-gray-900', 'text-white');
                document.body.classList.remove('bg-gray-50');
                // 更新深色模式下的元素样式
                document.querySelectorAll('.bg-white').forEach(el => {
                    el.classList.remove('bg-white');
                    el.classList.add('bg-gray-800');
                });
                document.querySelectorAll('.bg-gray-50').forEach(el => {
                    el.classList.remove('bg-gray-50');
                    el.classList.add('bg-gray-900');
                });
                document.querySelectorAll('.text-gray-600').forEach(el => {
                    el.classList.remove('text-gray-600');
                    el.classList.add('text-gray-300');
                });
                document.querySelectorAll('.text-gray-500').forEach(el => {
                    el.classList.remove('text-gray-500');
                    el.classList.add('text-gray-400');
                });
                document.querySelectorAll('.border-gray-200').forEach(el => {
                    el.classList.remove('border-gray-200');
                    el.classList.add('border-gray-700');
                });
                showToast('已切换至深色模式');
            } else {
                icon.classList.remove('fa-sun-o');
                icon.classList.add('fa-moon-o');
                document.body.classList.remove('bg-gray-900', 'text-white');
                document.body.classList.add('bg-gray-50');
                // 恢复浅色模式下的元素样式
                document.querySelectorAll('.bg-gray-800').forEach(el => {
                    el.classList.remove('bg-gray-800');
                    el.classList.add('bg-white');
                });
                document.querySelectorAll('.bg-gray-900').forEach(el => {
                    el.classList.remove('bg-gray-900');
                    el.classList.add('bg-gray-50');
                });
                document.querySelectorAll('.text-gray-300').forEach(el => {
                    el.classList.remove('text-gray-300');
                    el.classList.add('text-gray-600');
                });
                document.querySelectorAll('.text-gray-400').forEach(el => {
                    el.classList.remove('text-gray-400');
                    el.classList.add('text-gray-500');
                });
                document.querySelectorAll('.border-gray-700').forEach(el => {
                    el.classList.remove('border-gray-700');
                    el.classList.add('border-gray-200');
                });
                showToast('已切换至浅色模式');
            }
        }
        
        // 显示关于模态框
        function showAboutModal() {
            aboutModal.classList.remove('hidden', 'opacity-0');
            aboutModal.classList.add('opacity-100');
            aboutModal.querySelector('div').classList.remove('scale-95');
            aboutModal.querySelector('div').classList.add('scale-100');
        }
        
        // 隐藏关于模态框
        function hideAboutModal() {
            aboutModal.classList.remove('opacity-100');
            aboutModal.classList.add('opacity-0');
            aboutModal.querySelector('div').classList.remove('scale-100');
            aboutModal.querySelector('div').classList.add('scale-95');
            
            setTimeout(() => {
                aboutModal.classList.add('hidden');
            }, 300);
        }
        
        // 事件监听
        countBtn.addEventListener('click', countText);
        autoCountBtn.addEventListener('click', toggleAutoCount);
        clearInputBtn.addEventListener('click', () => {
            inputText.value = '';
            inputText.focus();
            resetStats();
            showToast('输入已清空');
        });
        copyResultBtn.addEventListener('click', copyToClipboard);
        downloadResultBtn.addEventListener('click', downloadResult);
        sampleTextBtn.addEventListener('click', loadSampleText);
        aboutBtn.addEventListener('click', showAboutModal);
        closeAboutBtn.addEventListener('click', hideAboutModal);
        gotItBtn.addEventListener('click', hideAboutModal);
        themeToggleBtn.addEventListener('click', toggleTheme);
        
        // 选项变更时重新统计（如果开启了实时统计）
        [countPunctuationCheckbox, countNumbersCheckbox, 
         ignoreWhitespaceCheckbox, detailedViewCheckbox].forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                if (autoCountEnabled || inputText.value.trim()) {
                    countText();
                }
            });
        });
        
        // 点击模态框外部关闭
        aboutModal.addEventListener('click', (e) => {
            if (e.target === aboutModal) {
                hideAboutModal();
            }
        });
        
        // 键盘快捷键
        document.addEventListener('keydown', (e) => {
            // Ctrl+Enter 执行统计
            if (e.ctrlKey && e.key === 'Enter') {
                e.preventDefault();
                countText();
            }
            
            // Ctrl+C 复制结果 (仅当有统计结果且未聚焦在输入元素上)
            if (e.ctrlKey && e.key === 'c' && 
                detailedStatsEl.textContent && 
                document.activeElement.tagName !== 'INPUT' && 
                document.activeElement.tagName !== 'TEXTAREA') {
                e.preventDefault();
                copyToClipboard();
            }
        });
        
        // 页面滚动时改变导航栏样式
        window.addEventListener('scroll', () => {
            const header = document.querySelector('header');
            if (window.scrollY > 10) {
                header.classList.add('py-2', 'shadow-lg');
                header.classList.remove('py-3', 'shadow-md');
            } else {
                header.classList.add('py-3', 'shadow-md');
                header.classList.remove('py-2', 'shadow-lg');
            }
        });
    </script>
</body>
</html>
